## 第一课搭架子

### 架子包括：

- 定义项目结构 （monorepo）
- 定义开发规范（lint、commit、tsC、代码风格）
- 选择打包工具

### 项目结构

**Multi-repo 和 Mono-repo 该如何选择？**

Multi-repo 每个库有自己独立的仓库，逻辑清晰，相对应的，协同管理会更繁琐。

Mono-repo 可以很方便的协同管理不同独立的库的生命周期，相对应的，会有更高的操作复杂度

参考资料：[现代前端工程为什么越来越离不开 Monorepo](https://zhuanlan.zhihu.com/p/362228487)

### Mono-repo 技术选型

**简单工具：**

- npm workspace
- Yarn workspace
- Pnpm workspace

**专业工具：**

- nx
- bit
- turborepo
- rush
- nx
- lerna

Pnpm 相比其他打包工具的优势：

- 依赖安装快
- 更规范（处理幽灵依赖问题）

参考资料：[pnpm 是凭什么对 npm 和 yarn 降维打击的？](https://juejin.cn/post/7127295203177676837)

### 定义开发规范

**代码规范检查与修复**

- 代码规范：lint 工具

eslint

安装：

```
pnpm i eslint -D -w
```

初始化

```
npx eslint --init
```

**commit 规范检查**

安装 husky，用于拦截 commit 命令

```
pnpm i husky -D -w
```

初始化 husky

```
npx husky install
```

将刚才实现的格式化命令 `pnpm lint`纳入 commit 时 husky 将执行的脚本：

```
npx husky add .husky/pre-commit
```

**选择打包工具**

比较不同打包工具的区别 參考资料：Overview |Tooling.Report

我们要开发的项目的特点：

- 是库，而不是业务项目
- 希望工具尽可能简洁、打包产物可读性高安装 rollup

```
pnpm i -D -w rollup
```
